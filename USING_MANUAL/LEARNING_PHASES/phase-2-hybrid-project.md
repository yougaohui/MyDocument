# ğŸ”„ Phase 2: æ··åˆé¡¹ç›®å®è·µ (2-3å‘¨)

## ğŸ¯ é˜¶æ®µç›®æ ‡

**æ ¸å¿ƒç›®æ ‡ï¼š** åœ¨ç°æœ‰ Android é¡¹ç›®ï¼ˆFitPro2ï¼‰ä¸Šå®è·µå¤šæ™ºèƒ½ä½“å¼€å‘ï¼Œåˆ›å»º Web ç®¡ç†åå°

**å…·ä½“ç›®æ ‡ï¼š**
- âœ… è®¾è®¡å¹¶å®ç° FitPro2 çš„ Web ç®¡ç†åå°
- âœ… å®ç° Android ä¸ Web åº”ç”¨çš„æ•°æ®åŒæ­¥
- âœ… æŒæ¡å¤šæ™ºèƒ½ä½“åˆ†å·¥åä½œæµç¨‹
- âœ… å®Œæˆå‰åç«¯ API è®¾è®¡å’Œå®ç°

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
**FitPro2 Web Management System**

### é¡¹ç›®æè¿°
ä¸ºç°æœ‰çš„ FitPro2 Android å¥èº«åº”ç”¨æ·»åŠ  Web ç®¡ç†åå°ï¼Œå®ç°ç”¨æˆ·æ•°æ®å¯è§†åŒ–ã€è®¾å¤‡ç®¡ç†ã€å¥åº·åˆ†æç­‰åŠŸèƒ½ã€‚

### æŠ€æœ¯æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Web Frontend                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç”¨æˆ·ç®¡ç†   â”‚  â”‚  æ•°æ®åˆ†æ   â”‚  â”‚  è®¾å¤‡ç®¡ç†   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   RESTful API                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç”¨æˆ·æ¥å£   â”‚  â”‚  æ•°æ®æ¥å£   â”‚  â”‚  è®¾å¤‡æ¥å£   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend Server                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node.js    â”‚  â”‚  PostgreSQL â”‚  â”‚  Redis      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Android   â”‚   â”‚   Cloud     â”‚   â”‚  External   â”‚
â”‚   App       â”‚   â”‚   Storage   â”‚   â”‚   APIs      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“… å‘¨è®¡åˆ’

### ç¬¬3å‘¨ï¼šé¡¹ç›®è®¾è®¡å’ŒåŸºç¡€æ­å»º

#### ä»»åŠ¡ 2.1: éœ€æ±‚åˆ†æå’Œç³»ç»Ÿè®¾è®¡ (3å¤©)

**ç›®æ ‡ï¼š** å®Œæˆç³»ç»Ÿéœ€æ±‚åˆ†æå’Œæ¶æ„è®¾è®¡

**å…·ä½“æ­¥éª¤ï¼š**

1. **åŠŸèƒ½éœ€æ±‚åˆ†æ**
   - ç”¨æˆ·ç®¡ç†åŠŸèƒ½
   - æ•°æ®å¯è§†åŒ–éœ€æ±‚
   - è®¾å¤‡ç®¡ç†éœ€æ±‚
   - æŠ¥è¡¨ç»Ÿè®¡éœ€æ±‚

2. **ç³»ç»Ÿæ¶æ„è®¾è®¡**
   - å‰ç«¯æ¶æ„é€‰æ‹©
   - åç«¯æ¶æ„è®¾è®¡
   - æ•°æ®åº“è®¾è®¡
   - API è®¾è®¡

3. **å¤šæ™ºèƒ½ä½“ä»»åŠ¡åˆ†é…**
   ```yaml
   # project-setup.yaml
   name: "fitpro-web-system"
   description: "FitPro2 Web ç®¡ç†åå°ç³»ç»Ÿ"
   agents:
     - name: "architect"
       role: "ç³»ç»Ÿæ¶æ„å¸ˆ"
       task: "æ•´ä½“æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹"
     - name: "frontend-lead"
       role: "å‰ç«¯è´Ÿè´£äºº"
       task: "å‰ç«¯æ¶æ„è®¾è®¡å’Œç»„ä»¶åº“é€‰æ‹©"
     - name: "backend-lead"
       role: "åç«¯è´Ÿè´£äºº"
       task: "åç«¯æ¶æ„è®¾è®¡å’Œæ•°æ®åº“è®¾è®¡"
     - name: "android-lead"
       role: "ç§»åŠ¨ç«¯è´Ÿè´£äºº"
       task: "Android é›†æˆæ–¹æ¡ˆè®¾è®¡"
   ```

**äº¤ä»˜ç‰©ï¼š**
- éœ€æ±‚åˆ†ææ–‡æ¡£
- ç³»ç»Ÿæ¶æ„è®¾è®¡å›¾
- æ•°æ®åº“è®¾è®¡æ–‡æ¡£
- API æ¥å£æ–‡æ¡£

#### ä»»åŠ¡ 2.2: å¼€å‘ç¯å¢ƒæ­å»º (2å¤©)

**ç›®æ ‡ï¼š** å®Œæˆé¡¹ç›®å¼€å‘ç¯å¢ƒæ­å»º

**å…·ä½“æ­¥éª¤ï¼š**

1. **å‰ç«¯ç¯å¢ƒæ­å»º**
   ```bash
   # åˆ›å»º React é¡¹ç›®
   npm create vite@latest fitpro-web -- --template react-ts
   
   # å®‰è£…ä¾èµ–
   cd fitpro-web
   npm install antd @ant-design/icons react-router-dom axios
   npm install -D tailwindcss postcss autoprefixer
   
   # åˆå§‹åŒ– Tailwind CSS
   npx tailwindcss init -p
   ```

2. **åç«¯ç¯å¢ƒæ­å»º**
   ```bash
   # åˆ›å»º Node.js é¡¹ç›®
   mkdir fitpro-api
   cd fitpro-api
   npm init -y
   
   # å®‰è£…ä¾èµ–
   npm install express cors helmet morgan
   npm install -D typescript ts-node @types/express
   npm install prisma @prisma/client
   ```

3. **æ•°æ®åº“æ­å»º**
   ```bash
   # å®‰è£… PostgreSQL (ä½¿ç”¨ Docker)
   docker run --name fitpro-db \
     -e POSTGRES_PASSWORD=your_password \
     -p 5432:5432 \
     -d postgres:14
   
   # åˆå§‹åŒ– Prisma
   npx prisma init
   ```

4. **Oh-My-OpenCode é…ç½®**
   ```bash
   # åˆ›å»ºé¡¹ç›®é…ç½®
   oh-my-opencode init fitpro-web-system
   
   # é…ç½®æ™ºèƒ½ä½“
   oh-my-opencode config add agent frontend
   oh-my-opencode config add agent backend
   ```

**äº¤ä»˜ç‰©ï¼š**
- å¯è¿è¡Œçš„å‰ç«¯é¡¹ç›®
- å¯è¿è¡Œçš„åç«¯é¡¹ç›®
- æ•°æ®åº“è¿æ¥é…ç½®
- Oh-My-OpenCode é¡¹ç›®é…ç½®

### ç¬¬4å‘¨ï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘

#### ä»»åŠ¡ 2.3: ç”¨æˆ·ç®¡ç†æ¨¡å— (3å¤©)

**ç›®æ ‡ï¼š** å®ç°ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œç®¡ç†åŠŸèƒ½

**å…·ä½“æ­¥éª¤ï¼š**

1. **åç«¯ç”¨æˆ·æ¨¡å—**
   ```typescript
   // src/modules/user/user.controller.ts
   import { Request, Response } from 'express';
   import { UserService } from './user.service';
   
   export class UserController {
     private userService: UserService;
     
     constructor() {
       this.userService = new UserService();
     }
     
     async register(req: Request, res: Response) {
       try {
         const user = await this.userService.createUser(req.body);
         res.status(201).json(user);
       } catch (error) {
         res.status(400).json({ error: error.message });
       }
     }
     
     async login(req: Request, res: Response) {
       try {
         const token = await this.userService.login(req.body);
         res.json({ token });
       } catch (error) {
         res.status(401).json({ error: error.message });
       }
     }
     
     async getProfile(req: Request, res: Response) {
       const user = await this.userService.getUserById(req.params.id);
       res.json(user);
     }
   }
   ```

2. **å‰ç«¯ç”¨æˆ·ç•Œé¢**
   ```tsx
   // src/pages/Login.tsx
   import { Form, Input, Button, Card } from 'antd';
   import { useNavigate } from 'react-router-dom';
   import { useMutation } from '@tanstack/react-query';
   import axios from 'axios';
   
   export const Login = () => {
     const navigate = useNavigate();
     const loginMutation = useMutation(
       (data: { email: string; password: string }) =>
         axios.post('/api/auth/login', data),
       {
         onSuccess: (response) => {
           localStorage.setItem('token', response.data.token);
           navigate('/dashboard');
         },
       }
     );
   
     const onFinish = (values: any) => {
       loginMutation.mutate(values);
     };
   
     return (
       <div className="login-container">
         <Card title="FitPro2 ç®¡ç†åå°">
           <Form onFinish={onFinish}>
             <Form.Item name="email" rules={[{ required: true }]}>
               <Input placeholder="é‚®ç®±" />
             </Form.Item>
             <Form.Item name="password" rules={[{ required: true }]}>
               <Input.Password placeholder="å¯†ç " />
             </Form.Item>
             <Form.Item>
               <Button type="primary" htmlType="submit" loading={loginMutation.isLoading}>
                 ç™»å½•
               </Button>
             </Form.Item>
           </Form>
         </Card>
       </div>
     );
   };
   ```

3. **å¤šæ™ºèƒ½ä½“ä»»åŠ¡é…ç½®**
   ```yaml
   # user-module.yaml
   name: "user-management-module"
   description: "ç”¨æˆ·ç®¡ç†æ¨¡å—å¼€å‘"
   parallel: true
   agents:
     - name: "backend-dev"
       task: "å®ç°ç”¨æˆ· CRUD API"
       output: "src/modules/user/"
     - name: "frontend-dev"
       task: "å®ç°ç”¨æˆ·ç®¡ç†ç•Œé¢"
       output: "src/pages/users/"
   ```

**äº¤ä»˜ç‰©ï¼š**
- ç”¨æˆ·ç®¡ç†åç«¯ API
- ç”¨æˆ·ç®¡ç†å‰ç«¯é¡µé¢
- ç”¨æˆ·è®¤è¯æµç¨‹
- æµ‹è¯•ç”¨ä¾‹

#### ä»»åŠ¡ 2.4: æ•°æ®å¯è§†åŒ–æ¨¡å— (2å¤©)

**ç›®æ ‡ï¼š** å®ç°å¥åº·æ•°æ®çš„ç»Ÿè®¡å’Œå¯è§†åŒ–

**å…·ä½“æ­¥éª¤ï¼š**

1. **æ•°æ®ç»Ÿè®¡åç«¯**
   ```typescript
   // src/modules/analytics/analytics.service.ts
   import { PrismaClient } from '@prisma/client';
   
   export class AnalyticsService {
     private prisma = new PrismaClient();
     
     async getUserActivityStats(userId: string, period: string) {
       const startDate = this.getStartDate(period);
       
       return this.prisma.activity.findMany({
         where: {
           userId,
           createdAt: { gte: startDate },
         },
         include: {
           user: true,
           device: true,
         },
       });
     }
     
     async getHealthSummary(userId: string) {
       const recentActivities = await this.prisma.activity.findMany({
         where: { userId },
         orderBy: { createdAt: 'desc' },
         take: 30,
       });
       
       return {
         totalSteps: recentActivities.reduce((sum, a) => sum + a.steps, 0),
         avgHeartRate: this.calculateAverage(recentActivities.map(a => a.heartRate)),
         sleepHours: this.calculateSleepAverage(recentActivities),
         caloriesBurned: recentActivities.reduce((sum, a) => sum + a.calories, 0),
       };
     }
     
     private getStartDate(period: string): Date {
       const now = new Date();
       switch (period) {
         case 'week': return new Date(now.setDate(now.getDate() - 7));
         case 'month': return new Date(now.setMonth(now.getMonth() - 1));
         case 'year': return new Date(now.setFullYear(now.getFullYear() - 1));
         default: return new Date(0);
       }
     }
   }
   ```

2. **æ•°æ®å¯è§†åŒ–å‰ç«¯**
   ```tsx
   // src/pages/Analytics.tsx
   import { useQuery } from '@tanstack/react-query';
   import { LineChart, Card, Statistic } from 'antd';
   import axios from 'axios';
   
   export const Analytics = () => {
     const { data: healthData, isLoading } = useQuery(
       ['healthSummary'],
       () => axios.get('/api/analytics/health-summary').then(res => res.data)
     );
     
     const { data: activityData } = useQuery(
       ['activityStats'],
       () => axios.get('/api/analytics/activity-stats').then(res => res.data)
     );
     
     if (isLoading) return <div>åŠ è½½ä¸­...</div>;
     
     return (
       <div className="analytics-page">
         <div className="stats-grid">
           <Card>
             <Statistic title="æ€»æ­¥æ•°" value={healthData?.totalSteps} />
           </Card>
           <Card>
             <Statistic title="å¹³å‡å¿ƒç‡" value={healthData?.avgHeartRate} suffix="bpm" />
           </Card>
           <Card>
             <Statistic title="ç¡çœ æ—¶é•¿" value={healthData?.sleepHours} suffix="å°æ—¶" />
           </Card>
           <Card>
             <Statistic title="æ¶ˆè€—å¡è·¯é‡Œ" value={healthData?.caloriesBurned} />
           </Card>
         </div>
         
         <Card title="æ´»åŠ¨è¶‹åŠ¿" className="chart-card">
           <LineChart
             data={activityData?.map(a => ({
               date: a.createdAt,
               steps: a.steps,
               calories: a.calories,
             }))}
             xField="date"
             yField="steps"
           />
         </Card>
       </div>
     );
   };
   ```

**äº¤ä»˜ç‰©ï¼š**
- æ•°æ®ç»Ÿè®¡åç«¯æœåŠ¡
- æ•°æ®å¯è§†åŒ–å‰ç«¯ç»„ä»¶
- æŠ¥è¡¨å¯¼å‡ºåŠŸèƒ½
- æµ‹è¯•ç”¨ä¾‹

#### ä»»åŠ¡ 2.5: è®¾å¤‡ç®¡ç†æ¨¡å— (2å¤©)

**ç›®æ ‡ï¼š** å®ç°è“ç‰™è®¾å¤‡çš„è¿æ¥ã€çŠ¶æ€ç›‘æ§å’Œç®¡ç†åŠŸèƒ½

**å…·ä½“æ­¥éª¤ï¼š**

1. **è®¾å¤‡ç®¡ç†åç«¯**
   ```typescript
   // src/modules/device/device.controller.ts
   import { Request, Response } from 'express';
   import { DeviceService } from './device.service';
   
   export class DeviceController {
     private deviceService = new DeviceService();
     
     async getDevices(req: Request, res: Response) {
       const devices = await this.deviceService.getUserDevices(req.user.id);
       res.json(devices);
     }
     
     async pairDevice(req: Request, res: Response) {
       const device = await this.deviceService.pairDevice(
         req.user.id,
         req.body.deviceInfo
       );
       res.json(device);
     }
     
     async getDeviceStatus(req: Request, res: Response) {
       const status = await this.deviceService.getDeviceStatus(req.params.deviceId);
       res.json(status);
     }
     
     async updateDevice(req: Request, res: Response) {
       const device = await this.deviceService.updateDevice(
         req.params.deviceId,
         req.body
       );
       res.json(device);
     }
     
     async unpairDevice(req: Request, res: Response) {
       await this.deviceService.unpairDevice(req.params.deviceId);
       res.status(204).send();
     }
   }
   ```

2. **è®¾å¤‡ç®¡ç†å‰ç«¯**
   ```tsx
   // src/pages/Devices.tsx
   import { Table, Button, Modal, Tag, Space } from 'antd';
   import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
   import axios from 'axios';
   
   export const Devices = () => {
     const queryClient = useQueryClient();
     const { data: devices, isLoading } = useQuery(
       ['devices'],
       () => axios.get('/api/devices').then(res => res.data)
     );
     
     const unpairMutation = useMutation(
       (deviceId: string) => axios.delete(`/api/devices/${deviceId}`),
       {
         onSuccess: () => {
           queryClient.invalidateQueries(['devices']);
         },
       }
     );
     
     const columns = [
       {
         title: 'è®¾å¤‡åç§°',
         dataIndex: 'name',
         key: 'name',
       },
       {
         title: 'è®¾å¤‡ç±»å‹',
         dataIndex: 'type',
         key: 'type',
         render: (type: string) => (
           <Tag color={type === 'watch' ? 'blue' : 'green'}>
             {type === 'watch' ? 'æ‰‹è¡¨' : 'æ‰‹ç¯'}
           </Tag>
         ),
       },
       {
         title: 'è¿æ¥çŠ¶æ€',
         dataIndex: 'status',
         key: 'status',
         render: (status: string) => (
           <Tag color={status === 'connected' ? 'success' : 'default'}>
             {status === 'connected' ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}
           </Tag>
         ),
       },
       {
         title: 'æ“ä½œ',
         key: 'actions',
         render: (_, record: any) => (
           <Space>
             <Button type="link" size="small">æŸ¥çœ‹</Button>
             <Button 
               type="link" 
               danger 
               size="small"
               onClick={() => unpairMutation.mutate(record.id)}
             >
               è§£é™¤ç»‘å®š
             </Button>
           </Space>
         ),
       },
     ];
     
     return (
       <div className="devices-page">
         <div className="page-header">
           <h2>è®¾å¤‡ç®¡ç†</h2>
           <Button type="primary">æ·»åŠ è®¾å¤‡</Button>
         </div>
         <Table 
           columns={columns} 
           dataSource={devices} 
           loading={isLoading}
           rowKey="id"
         />
       </div>
     );
   };
   ```

**äº¤ä»˜ç‰©ï¼š**
- è®¾å¤‡ç®¡ç†åç«¯ API
- è®¾å¤‡ç®¡ç†å‰ç«¯é¡µé¢
- è®¾å¤‡çŠ¶æ€ç›‘æ§
- æµ‹è¯•ç”¨ä¾‹

### ç¬¬5å‘¨ï¼šé›†æˆå’Œæµ‹è¯•

#### ä»»åŠ¡ 2.6: Android é›†æˆ (2å¤©)

**ç›®æ ‡ï¼š** å®ç° Android åº”ç”¨ä¸ Web åç«¯çš„æ•°æ®åŒæ­¥

**å…·ä½“æ­¥éª¤ï¼š**

1. **API å®¢æˆ·ç«¯å°è£…**
   ```java
   // com.xfkj.fitpro.utils.ApiClient.java
   public class ApiClient {
       private static final String BASE_URL = "https://api.fitpro2.com";
       private static ApiClient instance;
       private Retrofit retrofit;
       
       private ApiClient() {
           OkHttpClient okHttpClient = new OkHttpClient.Builder()
               .addInterceptor(chain -> {
                   Request original = chain.request();
                   Request.Builder requestBuilder = original.newBuilder()
                       .header("Authorization", "Bearer " + getToken())
                       .header("Content-Type", "application/json");
                   return chain.proceed(requestBuilder.build());
               })
               .build();
           
           retrofit = new Retrofit.Builder()
               .baseUrl(BASE_URL)
               .client(okHttpClient)
               .addConverterFactory(GsonConverterFactory.create())
               .build();
       }
       
       public static synchronized ApiClient getInstance() {
           if (instance == null) {
               instance = new ApiClient();
           }
           return instance;
       }
       
       public UserApi getUserApi() {
           return retrofit.create(UserApi.class);
       }
       
       public DataApi getDataApi() {
           return retrofit.create(DataApi.class);
       }
       
       public DeviceApi getDeviceApi() {
           return retrofit.create(DeviceApi.class);
       }
   }
   ```

2. **æ•°æ®åŒæ­¥æœåŠ¡**
   ```java
   // com.xfkj.fitpro.services.DataSyncService.java
   public class DataSyncService {
       private static final String TAG = "DataSyncService";
       
       public void syncHealthData(Context context) {
           List<HealthData> localData = getLocalHealthData(context);
           
           ApiClient.getInstance().getDataApi()
               .uploadHealthData(localData)
               .enqueue(new Callback<SyncResult>() {
                   @Override
                   public void onResponse(Call<SyncResult> call, Response<SyncResult> response) {
                       if (response.isSuccessful() && response.body() != null) {
                           markDataAsSynced(context, localData);
                           Log.d(TAG, "æ•°æ®åŒæ­¥æˆåŠŸ");
                       }
                   }
                   
                   @Override
                   public void onFailure(Call<SyncResult> call, Throwable t) {
                       Log.e(TAG, "æ•°æ®åŒæ­¥å¤±è´¥", t);
                   }
               });
       }
       
       private List<HealthData> getLocalHealthData(Context context) {
           // ä»æœ¬åœ°æ•°æ®åº“è·å–æœªåŒæ­¥çš„æ•°æ®
       }
       
       private void markDataAsSynced(Context context, List<HealthData> data) {
           // æ ‡è®°æ•°æ®ä¸ºå·²åŒæ­¥
       }
   }
   ```

3. **å¤šæ™ºèƒ½ä½“é›†æˆä»»åŠ¡**
   ```yaml
   # android-integration.yaml
   name: "android-integration"
   description: "Android åº”ç”¨ä¸ Web åç«¯é›†æˆ"
   agents:
     - name: "android-dev"
       task: "å®ç° API å®¢æˆ·ç«¯å’Œæ•°æ®åŒæ­¥æœåŠ¡"
       context: "ç°æœ‰ FitPro2 Android é¡¹ç›®"
     - name: "backend-dev"
       task: "æä¾› API æ–‡æ¡£å’Œæµ‹è¯•æ”¯æŒ"
       context: "åç«¯ API å¼€å‘"
     - name: "qa"
       task: "æµ‹è¯• Android ä¸åç«¯çš„é›†æˆ"
       context: "é›†æˆæµ‹è¯•"
   ```

**äº¤ä»˜ç‰©ï¼š**
- Android API å®¢æˆ·ç«¯
- æ•°æ®åŒæ­¥æœåŠ¡
- API é›†æˆæ–‡æ¡£
- æµ‹è¯•æŠ¥å‘Š

#### ä»»åŠ¡ 2.7: ç³»ç»Ÿæµ‹è¯•å’Œä¼˜åŒ– (3å¤©)

**ç›®æ ‡ï¼š** å®Œæˆç³»ç»Ÿæµ‹è¯•å¹¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–

**å…·ä½“æ­¥éª¤ï¼š**

1. **API æµ‹è¯•**
   ```bash
   # ä½¿ç”¨ Jest å’Œ Supertest è¿›è¡Œåç«¯æµ‹è¯•
   npm install --save-dev jest @types/jest supertest
   
   # è¿è¡Œæµ‹è¯•
   npm test
   ```

2. **å‰ç«¯æµ‹è¯•**
   ```bash
   # å®‰è£…æµ‹è¯•ä¾èµ–
   npm install --save-dev @testing-library/react @testing-library/jest-dom
   
   # è¿è¡Œæµ‹è¯•
   npm test
   ```

3. **æ€§èƒ½ä¼˜åŒ–**
   - åç«¯ï¼šæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥
   - å‰ç«¯ï¼šä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€CDN
   - ç½‘ç»œï¼šè¯·æ±‚åˆå¹¶ã€å‹ç¼©ä¼ è¾“

4. **å¤šæ™ºèƒ½ä½“æµ‹è¯•ä»»åŠ¡**
   ```yaml
   # system-testing.yaml
   name: "system-testing"
   description: "ç³»ç»Ÿé›†æˆæµ‹è¯•å’Œæ€§èƒ½ä¼˜åŒ–"
   agents:
     - name: "qa-engineer"
       task: "ç¼–å†™å’Œæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹"
     - name: "backend-dev"
       task: "åç«¯æ€§èƒ½ä¼˜åŒ–"
     - name: "frontend-dev"
       task: "å‰ç«¯æ€§èƒ½ä¼˜åŒ–"
   ```

**äº¤ä»˜ç‰©ï¼š**
- å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹
- æµ‹è¯•æŠ¥å‘Š
- æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- ç³»ç»Ÿéƒ¨ç½²æ–‡æ¡£

## ğŸ¯ äº¤ä»˜ç‰©æ¸…å•

### æ–‡æ¡£äº¤ä»˜ç‰©
- [ ] éœ€æ±‚åˆ†ææ–‡æ¡£
- [ ] ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£
- [ ] æ•°æ®åº“è®¾è®¡æ–‡æ¡£
- [ ] API æ¥å£æ–‡æ¡£
- [ ] ç”¨æˆ·æ“ä½œæ‰‹å†Œ
- [ ] éƒ¨ç½²è¿ç»´æ–‡æ¡£

### ä»£ç äº¤ä»˜ç‰©
- [ ] Web å‰ç«¯é¡¹ç›®ï¼ˆReactï¼‰
- [ ] åç«¯ API é¡¹ç›®ï¼ˆNode.jsï¼‰
- [ ] Android é›†æˆä»£ç 
- [ ] æ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] éƒ¨ç½²é…ç½®æ–‡ä»¶

### æµ‹è¯•äº¤ä»˜ç‰©
- [ ] åç«¯æµ‹è¯•ç”¨ä¾‹
- [ ] å‰ç«¯æµ‹è¯•ç”¨ä¾‹
- [ ] é›†æˆæµ‹è¯•æŠ¥å‘Š
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

## ğŸ“Š è¯„ä¼°æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… ç”¨æˆ·ç®¡ç†åŠŸèƒ½å®Œæ•´
- âœ… æ•°æ®å¯è§†åŒ–å±•ç¤ºæ­£ç¡®
- âœ… è®¾å¤‡ç®¡ç†åŠŸèƒ½æ­£å¸¸
- âœ… Android é›†æˆé¡ºç•…

### ä»£ç è´¨é‡
- âœ… ä»£ç è§„èŒƒç¬¦åˆæœ€ä½³å®è·µ
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡é«˜
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… å®‰å…¨æ¼æ´å·²ä¿®å¤

### é¡¹ç›®ç®¡ç†
- âœ… è¿›åº¦æŒ‰è®¡åˆ’æ¨è¿›
- âœ… æ–‡æ¡£æ›´æ–°åŠæ—¶
- âœ… å›¢é˜Ÿåä½œé¡ºç•…
- âœ… é—®é¢˜è§£å†³åŠæ—¶

## ğŸ”§ æŠ€æœ¯è¦ç‚¹

### æ ¸å¿ƒ API æ¥å£
```typescript
// ç”¨æˆ·ç›¸å…³
POST   /api/auth/register
POST   /api/auth/login
GET    /api/users/profile
PUT    /api/users/profile

// æ•°æ®åˆ†æ
GET    /api/analytics/health-summary
GET    /api/analytics/activity-stats
GET    /api/analytics/sleep-analysis

// è®¾å¤‡ç®¡ç†
GET    /api/devices
POST   /api/devices/pair
GET    /api/devices/:id/status
DELETE /api/devices/:id
```

### å¤šæ™ºèƒ½ä½“åä½œé…ç½®
```yaml
# fitpro-project.yaml
name: "fitpro-web-management"
version: "1.0.0"
agents:
  architect:
    model: "claude-3-5-sonnet"
    responsibilities: ["ç³»ç»Ÿè®¾è®¡", "æŠ€æœ¯é€‰å‹"]
  frontend:
    model: "gpt-4"
    responsibilities: ["å‰ç«¯å¼€å‘", "UI å®ç°"]
  backend:
    model: "claude-3-5-sonnet"
    responsibilities: ["åç«¯å¼€å‘", "API è®¾è®¡"]
  android:
    model: "claude-3-5-sonnet"
    responsibilities: ["Android é›†æˆ", "æ•°æ®åŒæ­¥"]
  qa:
    model: "gpt-4"
    responsibilities: ["æµ‹è¯•", "è´¨é‡ä¿è¯"]

workflows:
  default:
    parallel: true
    maxAgents: 3
```

---

**é˜¶æ®µçŠ¶æ€ï¼š** ğŸŸ¡ å‡†å¤‡å¼€å§‹  
**é¢„è®¡å¼€å§‹æ—¶é—´ï¼š** 2026å¹´1æœˆ30æ—¥  
**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** 2026å¹´2æœˆ19æ—¥  

> ğŸ’¡ æç¤ºï¼šæœ¬é˜¶æ®µé‡ç‚¹æ˜¯å®è·µå¤šæ™ºèƒ½ä½“åä½œï¼Œä¸è¦è¿½æ±‚å®Œç¾ï¼Œå…ˆå®Œæˆå†ä¼˜åŒ–ã€‚